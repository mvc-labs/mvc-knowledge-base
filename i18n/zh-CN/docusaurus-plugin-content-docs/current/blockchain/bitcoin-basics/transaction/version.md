---
sidebar_position: 1
---
# Version（交易版本号）

介绍比特币交易版本号字段。

## 什么是交易的版本号

交易的版本号（Transaction Version Number）是比特币交易数据结构中的一个字段，用于表示交易格式和规则的版本。它定义了交易的结构，并为协议的升级和新特性的引入提供支持。

## 版本号的作用

### 1. 定义交易格式

版本号指示交易的格式和解释方式。例如，不同版本的交易可能在输入、输出或脚本语法上有所不同。矿工和节点根据版本号解析和验证交易。

### 2. 支持协议升级

通过版本号，比特币协议可以逐步引入新特性和改进。例如，隔离见证（SegWit）是通过提高版本号来实现的。旧版本的节点可以继续处理旧格式的交易，而新版本的节点可以理解和处理新格式的交易。

### 3. 向后兼容

版本号允许新特性在不破坏旧特性或交易的情况下被引入。节点可以根据版本号选择性地处理交易，从而实现向后兼容。

## 版本号的取值

比特币交易的版本号是一个4字节的整数，当前使用的版本号主要有：

- **版本1**：最初的交易版本，自比特币创始以来使用。
- **版本2**：引入CHECKSEQUENCEVERIFY（BIP 68和BIP 112），支持相对时间锁定。
- **版本10**：MVC专用，支持[MetaTxid](../../mvc-improvements/meta-txid.md)计算。

## 获取交易版本号

使用比特币核心客户端，可以通过命令行接口（CLI）获取交易的详细信息，包括版本号。

### 获取交易详细信息

```bash
mvc-cli getrawtransaction <txid> 1
```

该命令返回的JSON数据中包含交易的版本号。

## 示例

假设我们有一个交易ID为`<txid>`的交易，使用上述命令获取详细信息，结果如下：

```json
{
  "txid": "<txid>",
  "version": 2,
  "locktime": 0,
  "vin": [...],
  "vout": [...]
}
```

上述示例中，"version"字段显示为2，表示该交易使用了版本2的格式和规则。

## 版本号的演变

比特币交易版本号的演变反映了协议的逐步改进和扩展。例如，BIP 68和BIP 112引入了相对时间锁定功能，并通过提高版本号来实现。未来的协议升级可能会进一步提高版本号，引入更多新特性和改进。

在MVC网络中，版本号10用于支持MetaTxid计算，为交易的验证和处理提供了新的功能。

## 总结

交易的版本号是比特币交易数据结构中的关键字段，用于定义交易的格式和支持协议升级。通过版本号的演变，比特币协议可以逐步引入新特性，同时保持向后兼容性。了解交易版本号的作用和获取方法，有助于深入理解比特币交易的结构和协议的演变。
