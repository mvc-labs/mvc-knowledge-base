---
sidebar_position: 2
---
# Input（交易输入）
介绍交易输入的数据结构及其作用。

## 什么是交易输入

比特币交易的输入（Transaction Input，简称“vin”）是指一个交易使用了之前交易输出（Transaction Output，简称“vout”）中的资金。每笔比特币交易的输入字段指定了资金的来源，即它引用了之前某笔交易的输出，并提供了解锁这些资金所需的信息。

## 交易输入字段的结构

每个交易输入包含以下几个关键字段：

### 1. 前交易哈希（previous transaction hash）

这是一个32字节的哈希值，表示被引用的之前交易的ID。这个字段确定了资金的来源交易。

### 2. 前输出索引（previous output index）

这是一个4字节的整数，表示被引用的之前交易中输出的索引位置。由于一笔交易可以有多个输出，这个索引用于定位具体的输出。

### 3. 解锁脚本（scriptSig）

解锁脚本是一个可变长度的字段，用于解锁之前交易输出的锁定脚本。通常包含签名和公钥，验证这笔交易的合法性。

### 4. 序列号（sequence number）

这是一个4字节的字段，用于相对时间锁定和交易替换。该字段在一些高级用例中起作用，比如BIP 68中描述的相对时间锁定。

## 示例

以下是一个比特币交易输入的示例，使用JSON格式表示：

```json
"vin": [
  {
    "txid": "previous_transaction_id",
    "vout": 0,
    "scriptSig": {
      "asm": "3045022100... 02b463...",
      "hex": "483045022100..."
    },
    "sequence": 4294967295
  }
]
```

在这个示例中：

- **txid** 表示之前交易的ID。
- **vout** 是之前交易中输出的索引位置。
- **scriptSig** 包含了解锁脚本的详细信息。
- **sequence** 是序列号，用于高级交易控制。

## 交易输入的作用

### 1. 确定资金来源

交易输入通过引用之前交易的输出来确定资金的来源，确保所有比特币交易都是有来源的。

### 2. 验证交易合法性

通过解锁脚本，交易输入验证了交易发起者对引用资金的控制权。只有提供正确的签名和公钥，才能解锁并使用之前交易的输出。

### 3. 实现高级功能

序列号字段和解锁脚本的组合允许实现相对时间锁定、交易替换等高级功能，增强了比特币交易的灵活性和功能性。

## 总结

交易输入是比特币交易中至关重要的组成部分，它确定了资金的来源并验证了交易的合法性。理解交易输入的结构和作用，有助于深入掌握比特币交易的工作原理和安全机制。
