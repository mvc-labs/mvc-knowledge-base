---
sidebar_position: 2
---

# 最长链原则

介绍什么是最长链原则，以及在区块链共识中的作用。

## 1. 什么是最长链原则

最长链原则（Longest Chain Rule）是比特币和其他区块链系统中用来确定哪条链为有效链的规则。该原则规定，网络中的节点应选择累计工作量（chainwork）最大的那条链作为有效的区块链。这通常被称为最长链。

## 2. 在区块链共识中的作用

### 2.1 解决分叉问题

在区块链网络中，由于节点分布全球，可能会同时生成两个不同的区块，从而形成链的分叉。根据最长链原则，节点会选择累计工作量最大的链作为主链。这样，随着更多区块的加入，最终会有一条链被选择为有效链，另一条链被抛弃。

### 2.2 保证交易的确认

最长链原则确保所有节点最终会对同一条链达成一致，这样可以保证链上的交易是被全网认可的。一旦交易所在的区块被多个后续区块确认，该交易被认为是可靠且不可篡改的。

### 2.3 提高网络安全性

通过确保节点选择累计工作量最大的链，最长链原则增加了攻击者成功重组链的难度。攻击者需要拥有超过全网一半的算力（即51%攻击）才能重组区块链，篡改交易记录。这样的高成本大大提高了攻击的难度和代价，从而增强了网络的安全性。

## 3. 如何使用CLI获取区块高度和链工作量

### 获取最新区块高度

```bash
mvc-cli getblockcount
```

### 获取区块的详细信息，包括链工作量

```bash
mvc-cli getblock <blockhash>
```

### 获取区块哈希

```bash
mvc-cli getblockhash <height>
```

## 4. 区块高度和确认数的关系

确认数是指交易被包含在区块中后，又有多少个区块叠加在其上。例如，如果某交易在区块高度654318被打包，当前最新区块高度为654321，则该交易的确认数为4（654321 -
654318 + 1）。

## 总结

最长链原则是区块链网络中达成共识的重要机制，通过选择累计工作量最大的链来解决分叉问题，保证交易的确认，提升网络的安全性。了解并应用最长链原则，有助于深入理解区块链技术及其在去中心化系统中的应用。
